/*! demo - v1.0.0 - 2016-04-19 */ 
define(["angular","config","IScroll","service"],function(a,b,c){"use strict";var d=a.module("book.controller",["Config","app.service"]);d.controller("bookController",["$rootScope","$scope","Config","$http","HttpService",function(a,b,d,e,f){console.log("bookController"),b.pageClass="page-home",console.log(d.book_search),b.keyword="谁的青春不迷茫",window.searchBookList=function(d){console.log(d),d.books.length&&(a.isNoLoaded=!1);for(var e=[],f=0;f<d.books.length;f++){var g=d.books[f],h={id:g.id,image:g.image,origin_title:g.title||"书名未共享",author:g.author[0]||"作者未知",publisher:g.publisher||"出版社未知",price:g.price.split(".")[0]||"未知",pages:g.pages};e.push(h)}b.data=e;var i=document.getElementById("wrapper");console.log(i);var j=new c(i,{click:!0,mouseWheel:!0,dataset:b.search,cacheSize:1e3});setTimeout(function(){j.refresh()},0),j.on("scrollEnd",function(){console.log("end scroll..."),0===this.y||100===this.y,setTimeout(function(){j.refresh()},0)}),j.on("scrollStart",function(){console.log("start scroll...")})},b.search=function(){""==b.keyword||void 0==b.keyword?a.bookList={}:f.querywithParams(d.book_search+"?callback=searchBookList&count=10&q="+b.keyword)},b.search()}]),d.controller("bookDetailController",["$scope","Config","$http","$stateParams",function(a,b,d,e){a.pageClass="page-about",console.log(e.id),d.jsonp(b.book_search_id+e.id+"?callback=callback_bookDetail&"),window.callback_bookDetail=function(b){console.log(b),a.data=b;var d=document.getElementById("wrapper");console.log(d);var e=new c(d);setTimeout(function(){e.refresh()},0)}}])});